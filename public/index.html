<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Socket.IO Counter</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-blue-100 to-blue-300 flex items-center justify-center min-h-screen">
  <div class="bg-white shadow-xl rounded-2xl p-8 text-center w-80">
    <!-- Ayet -->
    <h1 class="text-xl font-bold text-gray-800 mb-2">
      إِنَّا لِلّهِ وَإِنَّـا إِلَيْهِ رَاجِعونَ
    </h1>
    <p class="text-sm text-gray-600 mb-6 italic">
      İnna lillâhi ve innâ ileyhi râciûn
    </p>

    <!-- Kelime-i Tevhid -->
    <p class="text-lg text-gray-700 font-semibold mb-4">
      Lâ ilâhe illâllah, Muhammedün Rasûlullah
    </p>

    <!-- Hedef Girişi (Salt Okunur) -->
    <div class="mb-4">
      <label for="target-input" class="block text-sm text-gray-600 mb-2">Hedef:</label>
      <input
        id="target-input"
        type="number"
        class="w-full border border-gray-300 rounded-lg p-2 text-center bg-gray-100 text-gray-700 focus:outline-none"
        value="70000"
        readonly
      />
    </div>

    <!-- Sayaç (Tıklanabilir Yuvarlak Çerçeve) -->
    <div
  id="count-display"
  class="text-4xl font-extrabold text-green-600 bg-green-100 rounded-full w-52 h-52 flex items-center justify-center mx-auto cursor-pointer hover:bg-green-200 transition duration-200 mb-6 outline-none focus:outline-none focus:ring-0 select-none"
  tabindex="-1"
    >
    0
    </div>

    <!-- İlerleme Çubuğu -->
    <div class="w-full bg-gray-200 rounded-full h-4 overflow-hidden">
      <div id="progress-bar" class="bg-blue-500 h-4 rounded-full" style="width: 0%;"></div>
    </div>

    <!-- Yüzdeyi Göster -->
    <p id="progress-text" class="text-sm text-gray-600 mt-2">0%</p>
  </div>

  <!-- Include the Socket.IO client library -->
  <script src="/socket.io/socket.io.js"></script>

  <!-- Custom script to handle Socket.IO events -->
  <script>
    const socket = io();

    // Log when the client successfully connects to the server
    socket.on("connect", () => {
        console.log("Connected to server");
    });

    // Handle the custom event and log the message to the console
    socket.on("userConnected", (message) => {
        console.log(message);
    });

    // Update the counter when receiving "updateCount" event
    socket.on("updateCount", (count) => {
        console.log(`Received updateCount: ${count}`);
        document.getElementById("count-display").textContent = count;
        updateProgressBar(count);
    });

    // Send "increment" event when count display is clicked
    document.getElementById("count-display").addEventListener("click", () => {
        console.log("Increment button clicked");
        socket.emit("increment");
    });

    function updateProgressBar(count) {
        const target = 70000;
        const percentage = (count / target) * 100;
        document.getElementById("progress-bar").style.width = `${percentage}%`;
        document.getElementById("progress-text").textContent = `${percentage.toFixed(2)}%`;
    }
  </script>
</body>
</html>
